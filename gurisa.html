<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>La Gurisa en Villa La Angostura | Casa amplia para grupos - Happy Host</title>
<meta name="description" content="La Gurisa es una casa grande y cálida ubicada a solo 1200 metros del centro de Villa La Angostura. Ideal para 7 personas, con chimenea, parque amplio y el confort de Happy Host Patagonia.">
<meta name="keywords" content="La Gurisa, casa grande Villa La Angostura, alojamiento para grupos Patagonia, alquiler turístico Patagonia, casa para 7 personas, chimenea en la cordillera, alojamiento con parque Patagonia, casa equipada sur argentino, turismo en Villa La Angostura, alquiler familiar, Happy Host Patagonia, casa con hogar a leña, vacaciones en el sur, Patagonia Argentina, alquiler de casas con parque, casas cerca del centro, relax en la montaña, alojamiento para familias, turismo Neuquén, Cerro Bayo, Lago Correntoso, Lago Espejo, turismo rural, cabañas amplias Patagonia, casas para grupos grandes, descanso en la Patagonia, alquiler por semana Patagonia">
<meta name="author" content="Happy Host Patagonia">


  <!-- Icono y fuentes -->
  <link rel="icon" type="image/png" sizes="128x128" href="logos/happyhost.png">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

  <!-- Open Graph para WhatsApp y redes sociales -->
  <meta property="og:title" content="La Gurisa en Villa La Angostura | Happy Host Patagonia">
  <meta property="og:description" content="Amplia, cómoda y perfecta para grupos grandes. Descubrí La Gurisa en Villa La Angostura.">
  <meta property="og:image" content="https://www.happyhostpatagonia.com.ar/unidades/gurisa/gurisa2.jpg">
  <meta property="og:url" content="https://www.happyhostpatagonia.com.ar/gurisa.html">
  <meta property="og:type" content="website">


  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Tu CSS completo, con overrides incluidos al final -->
  <link rel="stylesheet" href="unidades.css">
</head>

<body>

  <header class="header">
    <div class="barra-menu">
      <div class="logo">
        <img src="logos/happy host.png" alt="Logo Happy Host" href="index.html">
      </div>

      <h1 class="titulo-header">La Gurisa</h1>

      <div class="volver">
  <a href="#" id="btnVolver" class="boton-volver">← Volver a alojamientos</a>
</div>
    </div>
  </header>

  <div class="fondo-blur">
  <section class="detalle-alojamiento">
    <div class="imagen-principal">
      <img src="unidades/gurisa/gurisa2.jpg" alt="Foto principal Gurisa">
      <div class="miniaturas-container">
        <button class="flecha izq">&#10094;</button>
        <div class="miniaturas" id="miniaturas-scroll">
          <img src="unidades/gurisa/gurisa2.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa3.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa4.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa5.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa6.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa7.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa8.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa9.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa10.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa11.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa12.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa13.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa14.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa15.jpg" alt="calafate7">
          <img src="unidades/gurisa/gurisa1.jpg" alt="calafate7">
        </div>
        <button class="flecha der">&#10095;</button>
      </div>
      
       <div class="info servicios">
        <h3>Servicios</h3>
        <div class="iconos-servicios">
          <div><img src="iconos/7 personas.png" alt="WiFi"><span>7 pax</span></div>
          <div><img src="iconos/wifi.png" alt="WiFi"><span>WiFi</span></div>
          <div><img src="iconos/cocina.png" alt="Cocina"><span>Cocina</span></div>
          <div><img src="iconos/estacionamiento.png" alt="Estacionamiento"><span>Estacionamiento</span></div>
          <div><img src="iconos/sabanas y toallas.png" alt="Sábanas"><span>Blancos</span></div>
          <div><img src="iconos/calefaccion.png" alt="Calefacción"><span>Calefacción</span></div>
          <div><img src="iconos/parrilla.png" alt="Parrilla"><span>Parrilla</span></div>
          <div><img src="iconos/hogar.png" alt="Parrilla"><span>Hogar</span></div>
        </div>
      </div>
      
    </div>
<div class="motor-reservas-fijo">
     <div class="reserva">
      <!-- Fechas en la misma línea -->
      <div class="dates">
        <div class="date-field" id="df-start">
          <input
            type="text"
            id="start"
            placeholder="Check in"
            readonly
          >
        </div>
        <div class="date-field" id="df-end">
          <input
            type="text"
            id="end"
            placeholder="Check out"
            readonly
          >
        </div>
      </div>
    
      <!-- Huéspedes -->
      <!-- Oculto para que el script siga funcionando -->
      <input type="hidden" id="guests" value="1" />

       <!-- Control visual para huéspedes -->
        <div class="huespedes-control">
           <button id="menos">−</button>
           <span id="contador">1 huésped</span>
           <button id="mas">+</button>
        </div>
    
      <!-- Selección de moneda -->
      <label for="currency" style="display:none;">Moneda</label>
      <select id="currency" style="display:none;">
      <option value="USD">USD</option>
      <option value="ARS">ARS</option>
      </select>
    
      <!-- Botón -->
      <button id="btnReservar" disabled>Reservar ahora</button>
    
      <!-- Resumen debajo -->
      <div id="resultado"></div>
  
    </div>
  </div>
  </section>

 <section class="contenido-info">
    <div class="info descripcion">
      <h3>Descripción</h3>
      <p><strong>La Gurisa</strong> amplitud y calidez en el corazón de Barrio Norte, ideal para disfrutar en familia o con amigos.</p>

        <p>Esta hermosa propiedad de dos plantas se encuentra en un entorno arbolado y tranquilo, con un amplio parque perfecto para descansar o jugar al aire libre. Ubicada en el barrio Norte de Villa La Angostura, a solo 5 minutos del centro en auto, combina comodidad, diseño patagónico y espacio para compartir.</p>
        <p>Con capacidad para 7 personas, en la planta baja encontrarás un living amplio con hogar a leña, una cocina totalmente equipada, lavadero y toilette. En la planta alta, se distribuyen tres habitaciones: una principal con baño en suite, y dos habitaciones adicionales que comparten un segundo baño completo.</p>
        <p>El sistema de calefacción es por radiadores garantiza una estadía cálida en todos los ambientes. También cuenta con Wi-Fi, Smart TV, lavarropas y un hermoso jardín con parrilla, ideal para disfrutar en cualquier época del año.</p>
        
        <strong>Check in / Check out AUTÓNOMO</strong></p>
    </div>

    <div class="info mapa">
      <h3>Ubicación</h3>
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.629130544553!2d-71.6606904!3d-40.74818549999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9610c100554bf037%3A0xba32fb5112171968!2sLa%20Gurisa!5e0!3m2!1ses!2sar!4v1745593043347!5m2!1ses!2sar"   allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      <div class="redes-contacto">
        <a href="https://wa.me/5492944700773" target="_blank">
          <img src="logos/whatsapp.png" alt="WhatsApp">
        </a>
        <a href="https://www.instagram.com/hhpatagonia?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank">
          <img src="logos/instagram.png" alt="Instagram">
        </a>
        <a href="https://x.com/hhpatagonia?s=21&t=UH7im4Y6WJT3722TpA05Iw">
          <img src="logos/twitter.png" alt="Correo">
        </a>
      </div>   
    </div>
  </section>
  </div>

   <script>

    const scrollContainer = document.getElementById('miniaturas-scroll');
    const flechaIzq = document.querySelector('.flecha.izq');
    const flechaDer = document.querySelector('.flecha.der');
  
    flechaIzq.addEventListener('click', () => {
      scrollContainer.scrollBy({ left: -150, behavior: 'smooth' });
    });
  
    flechaDer.addEventListener('click', () => {
      scrollContainer.scrollBy({ left: 150, behavior: 'smooth' });
    });


   document.addEventListener("DOMContentLoaded", function () {
   const principal = document.querySelector('.imagen-principal > img');
   const miniaturas = document.querySelectorAll('#miniaturas-scroll img');

    miniaturas.forEach(mini => {
    mini.addEventListener('click', () => {
      principal.src = mini.src; // Cambia la imagen principal
       });
     });
    });
  document.addEventListener("DOMContentLoaded", function () {
  const principal = document.querySelector('.imagen-principal > img');
  const miniaturas = document.querySelectorAll('#miniaturas-scroll img');

  miniaturas.forEach(mini => {
    mini.addEventListener('click', () => {
      principal.src = mini.src;

      // Quitar la clase activa a todas las miniaturas
      miniaturas.forEach(m => m.classList.remove('activa'));

      // Agregar clase activa a la que se clickeó
      mini.classList.add('activa');
      });
     });
    });
  </script>

<script>
const HOUSE_ID = 648950;
const ROOM_ID = 715936;

const params = new URLSearchParams(window.location.search);
const checkin = params.get("checkin");
const checkout = params.get("checkout");
const huespedes = params.get("huespedes");

localStorage.removeItem("checkin");
localStorage.removeItem("checkout");
localStorage.removeItem("huespedes");

const startInput = document.getElementById('start');
const endInput = document.getElementById('end');
const guestsInput = document.getElementById('guests');
const currSelect = document.getElementById('currency');
const resDiv = document.getElementById('resultado');
const reservarBtn = document.getElementById('btnReservar');
const menosBtn = document.getElementById('menos');
const masBtn = document.getElementById('mas');
const contador = document.getElementById('contador');

let cantidad = parseInt(huespedes) || 1;
const hoy = new Date();
hoy.setHours(0, 0, 0, 0);

// 🔒 Fecha máxima permitida para reservas en La Gurisa
const fechaLimite = new Date('2025-12-31');

window.addEventListener("DOMContentLoaded", () => {
  if (checkin) startInput.value = checkin;
  if (checkout) endInput.value = checkout;
  if (huespedes) {
    guestsInput.value = huespedes;
    cantidad = parseInt(huespedes);
  }
  actualizarContador();

  if (checkin) {
    setCurrencyAndCalculate(checkin);
  } else {
    calculate();
  }
});

const startPicker = flatpickr(startInput, {
  altInput: true,
  altFormat: 'd/m/Y',
  dateFormat: 'Y-m-d',
  defaultDate: checkin || null,
  minDate: hoy,
  maxDate: fechaLimite,
  disableMobile: true,
  onChange: (selectedDates) => {
    if (selectedDates[0]) {
      setCurrencyAndCalculate(selectedDates[0].toISOString().split('T')[0]);
    }
  }
});

const endPicker = flatpickr(endInput, {
  altInput: true,
  altFormat: 'd/m/Y',
  dateFormat: 'Y-m-d',
  defaultDate: checkout || null,
  minDate: hoy,
  maxDate: fechaLimite,
  disableMobile: true,
  onChange: calculate
});

startPicker.config.onChange.push((selectedDates) => {
  if (selectedDates[0]) {
    endPicker.setDate(null);
    endPicker.jumpToDate(selectedDates[0]);
    endPicker.open();
  }
});

let fechasOcupadas = [];

async function loadDisabledDates(picker) {
  try {
    const resp = await fetch('https://disponibilidad-happy-host-patagonia.onrender.com/api/ocupados/gurisa');
    if (!resp.ok) throw new Error(await resp.text());
    const rangos = await resp.json();
    fechasOcupadas = rangos;

    picker.set('disable', [
      ...rangos.map(r => ({ from: r.from, to: r.to })),
      date => date < hoy || date > fechaLimite
    ]);
  } catch (e) {
    console.error('No se pudieron cargar fechas ocupadas:', e.message);
  }
}

[startPicker, endPicker].forEach(picker => {
  picker.config.onReady.push(() => loadDisabledDates(picker));
  picker.config.onMonthChange.push(() => loadDisabledDates(picker));
  picker.config.onOpen.push(() => loadDisabledDates(picker));
});

function actualizarContador() {
  contador.textContent = cantidad === 1 ? '1 huésped' : `${cantidad} huéspedes`;
  guestsInput.value = cantidad;
}

menosBtn.addEventListener('click', () => {
  if (cantidad > 1) {
    cantidad--;
    actualizarContador();
    calculate();
  }
});

masBtn.addEventListener('click', () => {
  if (cantidad < 6) {
    cantidad++;
    actualizarContador();
    calculate();
  }
});

guestsInput.addEventListener('input', calculate);
currSelect.addEventListener('change', calculate);

function setCurrencyAndCalculate(fechaCheckin) {
  const fecha = new Date(fechaCheckin);
  const limite = new Date('2025-09-30');

  if (fechaCheckin) {
    if (fecha <= limite) {
      currSelect.value = 'ARS';
    } else {
      currSelect.value = 'USD';
    }
    currSelect.style.display = 'none';
    currSelect.disabled = true;
  } else {
    currSelect.style.display = 'block';
    currSelect.disabled = false;
  }

  calculate();
}

function hayCruceConFechasOcupadas(checkin, checkout) {
  const ci = new Date(checkin);
  const co = new Date(checkout);
  ci.setHours(0, 0, 0, 0);
  co.setHours(0, 0, 0, 0);

  return fechasOcupadas.some(({ from, to }) => {
    const inicio = new Date(from);
    const fin = new Date(to);
    inicio.setHours(0, 0, 0, 0);
    fin.setHours(0, 0, 0, 0);
    return (
      (ci > inicio && ci < fin) ||
      (co > inicio && co < fin) ||
      (ci <= inicio && co >= fin)
    );
  });
}

async function calculate() {
  const startValue = startInput.value;
  const endValue = endInput.value;
  const guests = +guestsInput.value;
  const moneda = currSelect.value;

  if (!startValue || !endValue) {
    resDiv.textContent = 'Seleccioná ambas fechas.';
    reservarBtn.disabled = true;
    return;
  }

  const sd = new Date(startValue), ed = new Date(endValue);
  if (ed <= sd) {
    resDiv.textContent = 'La fecha de fin debe ser posterior a la de inicio.';
    reservarBtn.disabled = true;
    return;
  }

  const MAX_GUESTS = 7, FREE_GUESTS = 4;
  if (guests > MAX_GUESTS) {
    resDiv.textContent = `La capacidad máxima es de ${MAX_GUESTS} huéspedes.`;
    reservarBtn.disabled = true;
    return;
  }

  if (hayCruceConFechasOcupadas(sd, ed)) {
    resDiv.textContent = 'El rango incluye fechas ya ocupadas.';
    reservarBtn.disabled = true;
    return;
  }

  const noches = Math.round((ed - sd) / (1000 * 60 * 60 * 24));
  resDiv.textContent = 'Cargando…';
  reservarBtn.disabled = true;

  try {
    const url = `https://disponibilidad-happy-host-patagonia.onrender.com/api/precios-diarios?start=${startValue}&end=${endValue}&houseId=${HOUSE_ID}&roomId=${ROOM_ID}`;
    const resp = await fetch(url);
    if (!resp.ok) throw new Error(await resp.text());
    const { dias = [], extras = [] } = await resp.json();

    if (dias.length === 0) {
      resDiv.textContent = 'No hay precios para estas fechas.';
      return;
    }

    const minStay = dias
      .map(d => Math.min(...d.prices.map(p => p.min_stay)))
      .reduce((a, b) => Math.min(a, b), Infinity);

    if (noches < minStay) {
      resDiv.textContent = `La estadía mínima es de ${minStay} noches.`;
      return;
    }

    let baseUSD = 0;
    for (let i = 0; i < noches; i++) {
      const d = dias[i];
      const p = d.prices.find(x => noches >= x.min_stay && noches <= x.max_stay)
        || d.prices.reduce((a, b) => a.min_stay < b.min_stay ? a : b);
      baseUSD += p.price_per_day;
    }

    const extraUnit = extras[0]?.price_per_day || 12;
    const extraQty = Math.max(0, guests - FREE_GUESTS);
    const extraUSD = extraQty * extraUnit * noches;
    const totalUSD = baseUSD + extraUSD;

    const fechaCheckin = new Date(startValue);
    let factorARS = 1400;
    if (fechaCheckin >= new Date('2025-05-01') && fechaCheckin <= new Date('2025-06-30')) {
      factorARS = 1250;
    } else if (fechaCheckin >= new Date('2025-07-01') && fechaCheckin <= new Date('2025-09-30')) {
      factorARS = 1380;
    }

    const total = moneda === 'USD' ? totalUSD : totalUSD * factorARS;
    const extra = moneda === 'USD' ? extraUSD : extraUSD * factorARS;

    let html = `<ul class="booking-summary">
      <li>Noches: ${noches}</li>
      <li>Huéspedes: ${guests}</li>` +
      (extraQty > 0 ? `<li>Extra huésped: ${extra.toLocaleString()} ${moneda}</li>` : '') +
      `<li><strong>Total:</strong> ${total.toLocaleString()} ${moneda}</strong></li>
    </ul>`;
    resDiv.innerHTML = html;

    reservarBtn.disabled = false;
    reservarBtn.onclick = () => {
      const qs = new URLSearchParams({
        propertyId: HOUSE_ID,
        roomTypeId: ROOM_ID,
        checkInDate: startValue,
        checkOutDate: endValue,
        numberOfGuests: guests,
        totalPrice: total,
        currency: moneda
      }).toString();
      window.location.href = `formulario.html?${qs}`;
    };
  } catch (e) {
    console.error(e);
    resDiv.textContent = 'Error al obtener datos: ' + e.message;
  }
}
</script>



<script src="volver.js"></script>

</body>
</html>